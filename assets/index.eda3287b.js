import{C as e,P as t,S as n,F as o,H as a,a as i,b as r,c as s,M as c,d,B as w,e as l,W as y,V as u,R as m}from"./vendor.572e7f06.js";let h,p,b,f;const g=[];let M,k=!1,x=!1,A=!1,z=!1,v=!1,L=performance.now();const S=new u,E=new u,j=new u,H=new e;function K(){h.aspect=window.innerWidth/window.innerHeight,h.updateProjectionMatrix(),b.setSize(window.innerWidth,window.innerHeight)}!function(){h=new t(75,window.innerWidth/window.innerHeight,1,1e3),h.position.y=10,p=new n,p.background=new e(16777215),p.fog=new o(16777215,0,750);const L=new a(15658751,7829384,.75);L.position.set(.5,1,.75),p.add(L),f=new i(h,document.body);const E=document.getElementById("blocker"),W=document.getElementById("instructions");W.addEventListener("click",(function(){f.lock()})),f.addEventListener("lock",(function(){W.style.display="none",E.style.display="none"})),f.addEventListener("unlock",(function(){E.style.display="block",W.style.display=""})),p.add(f.getObject());document.addEventListener("keydown",(function(e){switch(e.code){case"ArrowUp":case"KeyW":k=!0;break;case"ArrowLeft":case"KeyA":A=!0;break;case"ArrowDown":case"KeyS":x=!0;break;case"ArrowRight":case"KeyD":z=!0;break;case"Space":!0===v&&(S.y+=350),v=!1}})),document.addEventListener("keyup",(function(e){switch(e.code){case"ArrowUp":case"KeyW":k=!1;break;case"ArrowLeft":case"KeyA":A=!1;break;case"ArrowDown":case"KeyS":x=!1;break;case"ArrowRight":case"KeyD":z=!1}})),M=new m(new u,new u(0,-1,0),0,10);let N=new r(2e3,2e3,100,100);N.rotateX(-Math.PI/2);let O=N.attributes.position;for(let e=0,t=O.count;e<t;e++)j.fromBufferAttribute(O,e),j.x+=20*Math.random()-10,j.y+=2*Math.random(),j.z+=20*Math.random()-10,O.setXYZ(e,j.x,j.y,j.z);N=N.toNonIndexed(),O=N.attributes.position;const R=[];for(let e=0,t=O.count;e<t;e++)H.setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75),R.push(H.r,H.g,H.b);N.setAttribute("color",new s(R,3));const I=new c({vertexColors:!0}),P=new d(N,I);p.add(P);const B=new w(20,20,20).toNonIndexed();O=B.attributes.position;const C=[];for(let e=0,t=O.count;e<t;e++)H.setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75),C.push(H.r,H.g,H.b);B.setAttribute("color",new s(C,3));for(let e=0;e<500;e++){const e=new l({specular:16777215,flatShading:!0,vertexColors:!0});e.color.setHSL(.2*Math.random()+.5,.75,.25*Math.random()+.75);const t=new d(B,e);t.position.x=20*Math.floor(20*Math.random()-10),t.position.y=20*Math.floor(20*Math.random())+10,t.position.z=20*Math.floor(20*Math.random()-10),p.add(t),g.push(t)}b=new y({antialias:!0}),b.setPixelRatio(window.devicePixelRatio),b.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(b.domElement),window.addEventListener("resize",K)}(),function e(){requestAnimationFrame(e);const t=performance.now();if(!0===f.isLocked){M.ray.origin.copy(f.getObject().position),M.ray.origin.y-=10;const e=M.intersectObjects(g).length>0,n=(t-L)/1e3;S.x-=10*S.x*n,S.z-=10*S.z*n,S.y-=9.8*100*n,E.z=Number(k)-Number(x),E.x=Number(z)-Number(A),E.normalize(),(k||x)&&(S.z-=400*E.z*n),(A||z)&&(S.x-=400*E.x*n),!0===e&&(S.y=Math.max(0,S.y),v=!0),f.moveRight(-S.x*n),f.moveForward(-S.z*n),f.getObject().position.y+=S.y*n,f.getObject().position.y<10&&(S.y=0,f.getObject().position.y=10,v=!0)}L=t,b.render(p,h)}();
